---
description: 
globs: 
alwaysApply: false
---
# Правила для работы с комментариями

1. Вся работа с комментариями реализуется через отдельную сущность и фичу.
2. Нет ограничений по вложенности, но UI должен быть оптимизирован для больших деревьев.
3. Редактирование и удаление только своих комментариев.
4. Для новых комментариев использовать optimistic update (отображать сразу).
5. Все формы должны быть валидированы (не пустой текст).
6. Для дерева комментариев использовать рекурсивные компоненты.
7. Для удаления и редактирования комментария обязательно проверять права пользователя.
8. Для отображения количества комментариев использовать отдельный компонент.
